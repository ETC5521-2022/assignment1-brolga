---
title: "ETC5521 Assignment 1"
subtitle: "Board Games analysis"
team: brolga
author:
  - [Dhruv Nirmal]
  - [Gui Gao]
date: "`r Sys.Date()`"
output: 
  bookdown::html_document2: default
keep_md: true 
bibliography: references.bib 
---


[This assignment is for ETC5521 Assignment 1 by Team `r rmarkdown::metadata$team` comprising of `r knitr::combine_words(rmarkdown::metadata$author)`.]{style="color:#006DAE;"}


```{r message=FALSE, echo=FALSE}
# library packages
library(tidyverse)
library(kableExtra)
library(knitr)
library(drlib)
library(tidyr)
library(ggplot2)
library(plotly)
library(performance)
library(stringr)
library(broom)
```


```{r message=FALSE, echo=FALSE}
# read data
ratings <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-01-25/ratings.csv')
details <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-01-25/details.csv')
```



# Introduction and motivation

## Introduction:

The classic Board Games have been around for decades, bringing people together to enjoy the traditional game. In Greece there are many popular board game associations and 'fan clubs' which organise many tournaments and offer a wealth of prizes. 

Today, although Computer Games are in a golden age of development with technological support, there are still many great board games that are released each year and attract a lot of attention.

**Board Game Geek** is a specialist board game website. Users can find every board game and information about it. This information includes descriptions of the games, reviews, user ratings, professional ratings, prices, where to buy and more.


## Motivation:

My teammates and I are both interested in board games and have tried many interesting board games. This study and analysis of the huge dataset of board games can help us understand board games from a different perspective, and also help us understand the whole landscape of board games and how it has changed over time.

So, we have tried to dig deeper into the data itself to show some reports and interesting data visualisations of the results.


# Data description

a. **Source of the data**

Our data comes from *Kaggle* by way of **Board Games Geek**, with a hattip to *David and Georgios*. 
We could read the data in R via the following steps:

* ratings <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-01-25/ratings.csv')
* details <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-01-25/details.csv')


b. **The structure of the data**

We have two initial datasets, **ratings** and **details**. The initial size of the ratings dataset is around 4.8MB and contains 21631 observations and 10 columns. The original size of the details dataset is approximately 32.7MB, with 21831 observations and 23 columns.

* About **ratings** dataset:
[This dataset](https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-01-25/ratings.csv) contains information about the average rating , rank and theoretical rating average (bayes average). Every game's url and thumbnail link is also provided. It was collected over a time period of 100 AD to 2022.

```{r message=FALSE, echo=FALSE}
tibble(
  "variable" = colnames(ratings),
  "class" = c("double", "double", "character", "double", "double", "double",
              "double", "double", "character", "character"),
  "description" = c("Game number", "Game ID", "Game name", "The year game was 
                    released", "Game rank", "Average rating received by players",
                    "Bayes average rating", "Number of users rated the game",
                    "url of game", "link for thumbnail of game")
) %>%
  kable() %>%
  kable_styling(full_width = F,
                bootstrap_options = c("striped", "condensed", "bordered"))
```

* About **details** dataset observations:
[The details](https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-01-25/details.csv) dataset provides information about the type of board game, game mechanics, who was the artist, creator and publisher of the game. It provides an extensive detail about the game such as min and max player who can play the game, minimum age, how the game is played and also put each game in categories such as building, dice, drinking e.t.c. The data collected is over a time period of 400 
AD to 2023.


```{r message=FALSE, echo=FALSE}
tibble(
  "variables" = colnames(details),
  "class" = c("double", "double", "character", "character", "double", "double",                   "double", "double", "double", "double", "double", "character",                      "character", "character", "character", "character", "character",                    "character", "character", "double", "double", "double", "double"),
  "dsecription" = c("Game number", "Game ID", "Game name", "description of game",
                    "year game was published", "minimum number of players", 
                    "maximum number of players", "Playing time in minutes",
                    "minimum playing time", "maximum playing time", 
                    "minimum age to play the game", "Category", "Mechanic",
                    "board game family", "add-on tools in game", "implementation",
                    "designer of game", "Artist of game", "publisher of game",
                    "number of people who own the game", 
                    "number of people who trade the game", 
                    "number of people who want the game", 
                    "number of people who wish to get the game")
) %>%
  kable() %>%
  kable_styling(full_width = F,
                bootstrap_options = c("striped", "condensed", "bordered"))
```


# Questions of interest

## Questions list

Q1.
How board game ratings change by year of publication?

Q2.
Trends in game mechanics over time.

Q3.
Trends in board game publication rates over time.

Q4.
**What are the common game mechanics and their changes in prevalent?**

Q5.
What types of games are becoming increasingly popular?

Q6.
How many games have each listed how many mechanics?

Q7.
**What is the distribution of ratings for the board games?**

Q8.
Is there a linear relationship between the year of release of a game and the average rating it receives?

Q9.
Are Board Game Descriptions more positive or negative?

Q10.
What are the 10 most common words used in board game descriptions?

Q11. 
**Is there any relationship between average game time and ownership, min/max 
players?**

Q12. 
How does number of people who wish to own the game and who own the game plot 
against each other?  

Q13. 
How does Rank and average rating plot against each other. (Highly ranked games should have more rating)

Q14. 
Which age group prefers which type of game eg medical , building etc.? eg. 
younger children might be interested in building games etc and teenagers might be 
interested in games like Monopoly

Q15. 
Are people intrigued by a particular game designer?

Q16. 
**How did the era of electronic games(starting from 2010-11) affect the number of people who want/wish/own board games?** 

Q17. 
Is it right to assume that a game board publisher publishes a single type of 
board game and do the game publishers only focus on a certain age group?

Q18. 
Are people intrigued by a particular game publisher?

Q19. 
How accurate has bayes average been?

Q20. 
Which era or decade played a big role in people playing more board games?


## Interested Questions

Q1.
What are the common game mechanics and their changes in prevalent?

Q2.
What is the distribution of ratings for the board games?

Q3.
Is there any relationship between average game time and ownership, min/max players. 

Q4.
How did the era of electronic games(starting from 2010-11) affect the number of people who want/wish/own board games? 


# Expected findings

Q1.
The most common game mechanics maybe the 'Acting', 'Dice Rolling' and 'Hand Management'. I guess many game mechanics will become more popular.

Q2.
I guess the ratings for the games follow a normal distribution.

Q3.
More average play might mean less owners but might be popular among bigger groups 
of people.

Q4.
The demand of board games should be lower after the start of electronic games 
era.


# Analysis and findings

## Q1. What are the common game mechanics and their changes in prevalent?
```{r, echo = FALSE, message = FALSE}
q1_ratings <- ratings %>%
  select(id, name)
q1_details <- details %>%
  select(id, boardgamemechanic, yearpublished)

Q1_data <- q1_ratings %>%
  inner_join(q1_details,
             by = "id")

Q1_data$boardgamemechanic <- gsub('[[]', '', Q1_data$boardgamemechanic)
Q1_data$boardgamemechanic <- gsub('[]]', '', Q1_data$boardgamemechanic)
```


```{r, echo = FALSE, message = FALSE}
Q1_data <- Q1_data %>%
  
  separate_rows(boardgamemechanic, sep = ",") %>%
  arrange(id)

Q1_data$boardgamemechanic <- gsub("'", '', Q1_data$boardgamemechanic)
Q1_data$boardgamemechanic <- str_trim(Q1_data$boardgamemechanic)
Q1_data$boardgamemechanic <- gsub('"', '', Q1_data$boardgamemechanic)
```


```{r, table, echo = FALSE, message = FALSE}
Table1 = Q1_data %>%
  count(boardgamemechanic, sort = TRUE) %>%
  top_n(10)
knitr::kable(Table1, booktabs = TRUE, "html",
             caption = "The Most Common Game Mechanics") %>%
  kable_styling(bootstrap_options = c("striped", "hover", "hold_position"), 
                full_width = F)
```


```{r, figure1, fig.height=6, fig.width=8, echo = FALSE, message = FALSE}
Q1_data %>%
  count(boardgamemechanic, sort = TRUE) %>%
  na.omit() %>%
  top_n(20) %>%
  ggplot(aes(x = reorder(boardgamemechanic, n),
             y = n)) +
  geom_col(fill = "#78a99c",
           color = "#3f6b61",
           show.legend = FALSE) +
  coord_flip() +
  scale_x_reordered() +
  labs(x = "Number",
       y = "Mechanics",
       title = "Most Common Mechanics") +
  theme_minimal() +
  theme(plot.title = element_text(hjust = 0.5)) -> p1
ggplotly(p1)
```


```{r, figure2, fig.height=6, fig.width=8, echo = FALSE, message = FALSE}
Q1_data %>%
  filter(yearpublished %in% c(1990:2002, 2010:2022)) %>%
  mutate(year = ifelse(yearpublished <= 2002, "1990s", "2010s")) %>%
  group_by(year, boardgamemechanic) %>%
  summarise(count = n()) %>%
  top_n(20) %>%
  spread(key = year, value = count) %>%
  na.omit() %>%
  ggplot() +
  geom_point(aes(x = `1990s`,
                 y = reorder(boardgamemechanic, `2010s` - `1990s`)), 
             color = "#Aa3428") +
  geom_point(aes(x = `2010s`,
                 y = boardgamemechanic), 
             color = "#609c6c",
             size = 3) +
  geom_segment(aes(x = `1990s`, 
                   xend = `2010s`,
                   y = boardgamemechanic, 
                   yend = boardgamemechanic)) +
  theme_minimal() +
  labs(x = "Number",
       y = "Mechanics", 
       title = "Most Prevalent Mechanics in the 1990s and 2010s") -> p2
ggplotly(p2)
```


## Q1 Conclusion

a.
According to above table and column plot, we can find that the most common game mechanic is **Dice Rolling**, unsurprisingly. This is because **Dice Rolling** itself is a mechanic that can be used in many games. It has been around for a long time, and ancient peoples could make simple dice out of stones, clay, bones, etc. to play the game, so **Dice Rolling** is often seen as the most dominant symbol of board games @yermolaieva2017dice.

b.
Before I analyzed this question, I made an inference based on the actual situation of family and friends in my life -- the most common board game mechanics will become more and more popular. With lollipop plot above, we can see that the top 20 most common game mechanics have become more and more popular over the past few decades. This is consistent with my previous assumptions. 
This is because modern board games are starting to include more mechanics, and the variety of games is becoming richer over time, so board games as a whole can also appeal to a wider audience. Another very important reason is that we now have a better standard of living and more free time, and the increase in leisure time is an obvious driver of demand for entertainment products such as board games.


## Q2. What is the distribution of ratings for the board games?
```{r, echo = FALSE, message = FALSE}
q2_ratings <- ratings %>%
  select(id, name, average)
q2_details <- details %>%
  select(id,yearpublished)

Q2_data <- q2_ratings %>%
  inner_join(q2_details,
             by = "id")
```


```{r, figure3, echo = FALSE, message = FALSE}
# plot
Q2_data %>%
  filter(yearpublished >= 1990) %>%
  ggplot(aes(x = average,
             y = ..density..)) +
  geom_histogram(fill = "#78a99c", 
                 color = "#3f6b61", 
                 alpha = 0.9) +
  geom_density(color = "#Aa3428") +
  labs(x = "Average Rating",
       y = "Density",
       title = "Distribution of Average Ratings") +
  theme_minimal() +
  theme(plot.title = element_text(hjust = 0.5)) -> p3
ggplotly(p3)
```


```{r, echo = FALSE, message = FALSE, warning = FALSE}
# ks.test
ks.test <- ks.test(x = Q2_data$average, 'pnorm', 
                   mean = mean(Q2_data$average), 
                   sd = sd(Q2_data$average))
Table2 = tidy(ks.test)
knitr::kable(Table2, booktabs = TRUE, "html",
             caption = "Boardgame Ratings ks.test",
             digits = 10) %>%
  kable_styling(bootstrap_options = c("striped", "hover", "hold_position"), 
                full_width = F)
```


## Q2 Conclusion

From the above table output we can see that the test statistic is 0.021989, corresponding to a p-value of 1.647e-09. Since the p-value is less than 0.05, we reject the original hypothesis. We have sufficient evidence that the board game ratings for this sample data are not from a normal distribution.

# References
